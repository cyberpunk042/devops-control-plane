<!-- Debugging Tab -->
<div id="tab-debugging" class="tab-content">
    <header class="tab-header">
        <h1>ğŸ› Debugging</h1>
        <p class="subtitle">Diagnostics, logs, and system inspection</p>
    </header>

    <div class="debug-modes">
        <button class="content-mode active" onclick="debugSwitchMode('audit')">ğŸ“‹ Audit Log</button>
        <button class="content-mode" onclick="debugSwitchMode('state')">ğŸ“¦ State</button>
        <button class="content-mode" onclick="debugSwitchMode('health')">â¤ï¸ Health</button>
        <button class="content-mode" onclick="debugSwitchMode('config')">âš™ï¸ Config</button>
    </div>

    <div class="grid">
        <!-- Audit log viewer -->
        <div class="card full-width" id="debug-audit">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-sm);flex-wrap:wrap;gap:8px">
                <div style="display:flex;align-items:center;gap:8px">
                    <h2 class="card-title" style="margin:0">Audit Log</h2>
                    <span id="debug-audit-count" style="font-size:0.64rem;padding:2px 7px;border-radius:10px;background:var(--accent);color:#fff;font-weight:600;min-width:18px;text-align:center" title="Total entries"></span>
                </div>
                <div style="display:flex;gap:0.4rem">
                    <button class="btn btn-sm btn-ghost debug-audit-toggle active" data-mode="scans" onclick="debugAuditToggle('scans')" style="font-size:0.7rem" title="Scan activity from Audit & DevOps tabs">ğŸ”¬ Scan Activity</button>
                    <button class="btn btn-sm btn-ghost debug-audit-toggle" data-mode="ops" onclick="debugAuditToggle('ops')" style="font-size:0.7rem" title="CLI operation log from audit.ndjson">âš¡ CLI Operations</button>
                </div>
            </div>
            <!-- Search & Filter bar -->
            <div id="debug-audit-toolbar" style="display:flex;align-items:center;gap:8px;margin-bottom:var(--space-sm);flex-wrap:wrap">
                <div style="position:relative;flex:1;min-width:180px;max-width:360px">
                    <input id="debug-audit-search" type="text" placeholder="Search label, summary, targetâ€¦" style="width:100%;padding:5px 10px 5px 30px;border-radius:var(--radius-sm);border:1px solid var(--border-subtle);background:var(--bg-primary);color:var(--text-primary);font-size:0.72rem;outline:none" oninput="_auditSearchDebounce()">
                    <span style="position:absolute;left:9px;top:50%;transform:translateY(-50%);font-size:0.72rem;opacity:0.5">ğŸ”</span>
                </div>
                <select id="debug-audit-card-filter" onchange="loadDebugAuditScans()" style="padding:5px 8px;border-radius:var(--radius-sm);border:1px solid var(--border-subtle);background:var(--bg-primary);color:var(--text-primary);font-size:0.72rem;outline:none;min-width:100px">
                    <option value="">All types</option>
                </select>
                <span id="debug-audit-filtered-count" style="font-size:0.62rem;color:var(--text-muted);white-space:nowrap"></span>
            </div>
            <div id="debug-audit-scans" class="activity-list" style="max-height:600px;overflow-y:auto">
                <div class="activity-item" style="color:var(--text-muted)">
                    <span class="spinner"></span>&nbsp; Loading scan activity...
                </div>
            </div>
            <div id="debug-audit-scans-more" style="display:none;text-align:center;padding:8px">
                <button class="btn btn-sm btn-ghost" onclick="_auditLoadMore()" style="font-size:0.72rem">â¬‡ Load more</button>
            </div>
            <div id="debug-audit-ops" class="activity-list" style="display:none;max-height:600px;overflow-y:auto">
                <div class="activity-item" style="color:var(--text-muted)">
                    <span class="spinner"></span>&nbsp; Loading CLI operations...
                </div>
            </div>
        </div>

        <!-- State inspector -->
        <div class="card full-width" id="debug-state" style="display:none">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-md)">
                <h2 class="card-title" style="margin:0">State Inspector</h2>
                <div style="display:flex;gap:0.4rem">
                    <button class="btn btn-sm btn-ghost debug-view-toggle active" data-panel="state" data-mode="preview" onclick="debugToggleView('state','preview')" style="font-size:0.7rem" title="Structured preview">ğŸ“Š Preview</button>
                    <button class="btn btn-sm btn-ghost debug-view-toggle" data-panel="state" data-mode="source" onclick="debugToggleView('state','source')" style="font-size:0.7rem" title="View JSON source in editor">{ } Source</button>
                </div>
            </div>
            <div id="debug-state-preview"></div>
            <div id="debug-state-editor" style="display:none;height:500px;border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--border)"></div>
        </div>

        <!-- Health details -->
        <div class="card full-width" id="debug-health" style="display:none">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-md)">
                <h2 class="card-title" style="margin:0">Health Details</h2>
                <div style="display:flex;gap:0.4rem">
                    <button class="btn btn-sm btn-ghost debug-view-toggle active" data-panel="health" data-mode="preview" onclick="debugToggleView('health','preview')" style="font-size:0.7rem" title="Structured preview">ğŸ“Š Preview</button>
                    <button class="btn btn-sm btn-ghost debug-view-toggle" data-panel="health" data-mode="source" onclick="debugToggleView('health','source')" style="font-size:0.7rem" title="View JSON source in editor">{ } Source</button>
                </div>
            </div>
            <div id="debug-health-preview"></div>
            <div id="debug-health-editor" style="display:none;height:500px;border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--border)"></div>
        </div>

        <!-- Config dump -->
        <div class="card full-width" id="debug-config" style="display:none">
            <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:var(--space-md)">
                <h2 class="card-title" style="margin:0">Configuration</h2>
                <div style="display:flex;gap:0.4rem">
                    <button class="btn btn-sm btn-ghost debug-view-toggle active" data-panel="config" data-mode="preview" onclick="debugToggleView('config','preview')" style="font-size:0.7rem" title="Structured preview">ğŸ“Š Preview</button>
                    <button class="btn btn-sm btn-ghost debug-view-toggle" data-panel="config" data-mode="source" onclick="debugToggleView('config','source')" style="font-size:0.7rem" title="View JSON source in editor">{ } Source</button>
                </div>
            </div>
            <div id="debug-config-preview"></div>
            <div id="debug-config-editor" style="display:none;height:500px;border-radius:var(--radius-md);overflow:hidden;border:1px solid var(--border)"></div>
        </div>
    </div>
</div>